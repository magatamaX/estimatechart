# estimatechart

## 価格推定の概要
表示カテゴリは、デザイン制作カテゴリのプロジェクト方式のみ。
sage makerで作成したエンドポイントを叩いて、依頼の単価推定を行う。

## 表示するページ
- 依頼作成ページ
- 依頼修正ページ
- 依頼への提案ページ


# クライアント側

## 依頼作成ページ
目安予算の選択をトリガーに、以下グラフが表示される。
動的に変化する要素は
- 成約率の高い推定単価(45,000円 ~ 54,000円)
- 推定単価のグラフ(青い部分)
- 設定予算(予算の入力フォームから取得)
- 設定予算のグラフ(推定単価以上ならオレンジ。以下なら赤)

優良スコアのグラフは変化しない。

### APIの形式
#### 引数
- category_id
- private（0 or 1. 直接依頼かどうかを判断する引数）
- budget_from
- work_id : この時点では持っていないので、空でOK.

#### レスポンス
- estimate_from (45,000円)
- estimate_to (54,000円)

#### エンドポイント
lancers.jp/v1/price_estimate/work/predict

## 依頼修正ページ
このページの予算と提案者制限の間に、依頼作成ページと同じ感じで表示する。

### APIの形式
#### 引数
- category_id
- private
- budget_from
- work_id

#### レスポンス
- estimate_from (45,000円)
- estimate_to (54,000円)

#### エンドポイント
lancers.jp/v1/price_estimate/work/predict


# ランサー側

## 提案ページ
契約金額(税抜)の変更をトリガーに、以下グラフが表示される。
動的に変化する要素は
- 契約金額のライン
  
依頼予算はコントローラから取得。
推定単価はAPIから取得する。
描画するグラフの数式詳細と、予算の表示幅計算はあとで詳細送ります。
優良スコアのグラフ自体と青、灰色の分は変化せず、オレンジの線が金額に応じて移動するイメージです。

### APIの形式
#### 引数
- work_id

#### レスポンス
- estimate_from (45,000円)
- estimate_to (54,000円)

#### エンドポイント
lancers.jp/v1/price_estimate/work/get_estimate


# 表示する予算の幅
予算幅に基づいた設計にしましょう！
推定単価(estimate_to)が属する単価幅が属する価格帯の上下一つの金額帯をグラフ下部に表示する。
  
ex. 推定単価 45000 ~ 54000
  
estimate_toが54000なので、5万 ~ 10万の価格帯に属する。
その上下一つ分なので、グラフ下部に表示される価格は
20000 ~ 200000でお願いします。
  
もし推定単価が300万円 ~ 500万円の場合は、推定単価が1000万以内なら、100 ~ 1000万、1000万以上なら1000 ~ 2000万みたいな感じで1000万単位の表示でお願いします。
500万円以上の場合は300 ~ 1000でお願いします。それ以上の場合は上記と同じ感じでお願いします。
  
推定単価が5000円未満だった場合は500円から10000円でお願いします。
500円の理由は、プロジェクト方式の単価は500円以上とするとルールを内部的に（まだ）定めているからです。
